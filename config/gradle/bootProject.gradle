apply plugin: 'io.spring.dependency-management'
apply plugin: 'org.springframework.boot'
apply plugin: "java"
apply plugin: 'application'
//    apply from: '../tasks.gradle'

ext.springJvmArgs = ["-Dspring.profiles.active=$env"]
ext.appJvmArgs = ext.springJvmArgs + [
        "-Dfile.encoding=UTF-8",
        "-Xlog:gc*",
        "-XX:-OmitStackTraceInFastThrow"]

if (!isProd(env)) {
    appJvmArgs += ["-noverify"
                   , "-XX:TieredStopAtLevel=1"
                   , "-XX:+AlwaysPreTouch"]
}
defaultTasks 'compileJava', 'checkStyle', 'jar'

distZip.enabled = false
distTar.enabled = false
bootDistTar.enabled = false
bootDistZip.enabled = false

//    processResources.dependsOn copyConfiguration

dependencies {
//        testCompile "org.springframework:spring-test"
//        testCompile "org.springframework.boot:spring-boot-test"
    testCompile group: 'org.springframework.boot', name: 'spring-boot-starter-test'

    testCompile group: 'org.springframework.restdocs', name: 'spring-restdocs-mockmvc'
}
