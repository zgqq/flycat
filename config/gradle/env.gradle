ext.environment = "dev"
if (hasProperty("env")) {
    ext.environment = "$env"
}

ext.env = ext.environment
ext.isProd = { env ->
    return "prod".equals(env.toString()) || "production".equals(env.toString()) ||
            "product".equals(env.toString()) || "docker".equals(env.toString())
}

ext.isTestServer = { env ->
    return "test".equals(env.toString()) || "testdocker".equals(env.toString())
}

ext.isDocker = {
    env -> return "docker".equals(env.toString()) || "testdocker".equals(env.toString())
}

ext.isDev = {
    return !isProd(env) && !isTestServer(env)
}


ext.ignoredEnv = false
def executingTasks = project.gradle.startParameter.taskNames
if (executingTasks == null || executingTasks.isEmpty()
        || 'classes' in executingTasks
        || 'compileJava' in executingTasks) {
    ignoredEnv = true
}

println "Executing ${project.gradle.startParameter.taskNames}, ignoredEnv $ignoredEnv"

